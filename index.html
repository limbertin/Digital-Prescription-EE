<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receitu√°rio Digital - Essential Energy</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="background-energy"></div>

    <main class="app-layout">
        <!-- Main Content: Cat√°logo de Produtos -->
        <section class="catalog-section">
            <header class="catalog-header">
                <h1>Cat√°logo de Ess√™ncias</h1>
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="Buscar ess√™ncia..." autocomplete="off"
                        tabindex="1">
                    <button id="clear-search" class="btn-clear-search" title="Limpar busca"
                        tabindex="-1">&times;</button>
                </div>
            </header>

            <div class="products-grid" id="products-grid">
                <!-- Produtos inseridos via JS -->
            </div>
        </section>

        <!-- Sidebar: Prescri√ß√£o em Constru√ß√£o -->
        <aside class="sidebar-section">
            <div class="glass-sidebar">
                <header class="sidebar-header">
                    <div class="patient-info-trigger" id="patient-trigger" tabindex="2" role="button">
                        <span class="label">Paciente:</span>
                        <span class="value" id="patient-name-display">Clique para preencher</span>
                    </div>
                    <div class="product-badge" id="selected-count">0</div>
                </header>

                <div class="selected-products-list" id="sidebar-list">
                    <p class="empty-state">Nenhuma ess√™ncia selecionada</p>
                </div>

                <div class="sidebar-footer">
                    <button class="btn-primary disabled" id="btn-submit" disabled tabindex="4">Gerar
                        Receitu√°rio</button>
                    <div class="secondary-actions">
                        <button class="btn-secondary" id="btn-copy" tabindex="5">Copiar √öltima</button>
                        <button class="btn-secondary danger" id="btn-reset" tabindex="6">Limpar Tudo</button>
                    </div>
                </div>
            </div>
        </aside>
    </main>

    <!-- Modal de Dosagem (Individual Interface) -->
    <div class="modal-overlay" id="dosage-modal">
        <div class="modal-content">
            <section class="prescription-card" id="dosage-card">
                <header class="card-header-dosage">
                    <div class="logo-container">
                        <div class="logo-glow"></div>
                        <img src="" alt="" class="modal-product-logo" id="modal-logo">
                    </div>
                    <h2 class="product-name-dosage"><span id="modal-product-name"></span> <span class="size">30ML</span>
                    </h2>
                </header>

                <div class="card-content-dosage">
                    <div class="input-group" id="group-spray">
                        <label class="group-label">Frascos spray</label>
                        <div class="chip-container" data-field="spray">
                            <button class="chip common active" data-value="1">1 <small>mais comum</small></button>
                            <button class="chip" data-value="2">2</button>
                            <button class="chip" data-value="3">3</button>
                            <button class="chip" data-value="4">4</button>
                            <button class="chip custom-trigger">&plusmn;</button>
                            <div class="custom-input-wrapper hidden">
                                <button class="btn-step minus">&minus;</button>
                                <span class="step-value">5</span>
                                <button class="btn-step plus">&plus;</button>
                                <button class="btn-confirm-custom">OK</button>
                            </div>
                        </div>
                    </div>

                    <div class="input-group" id="group-dosage">
                        <label class="group-label">Borrifar ___ vezes</label>
                        <div class="chip-container" data-field="dosage">
                            <button class="chip common" data-value="3">3 <small>mais comum</small></button>
                            <button class="chip common active" data-value="4">4 <small>mais comum</small></button>
                            <button class="chip" data-value="5">5</button>
                            <button class="chip" data-value="6">6</button>
                            <button class="chip custom-trigger">+</button>
                            <div class="custom-input-wrapper hidden">
                                <button class="btn-step minus">&minus;</button>
                                <span class="step-value">8</span>
                                <button class="btn-step plus">&plus;</button>
                                <button class="btn-confirm-custom">OK</button>
                            </div>
                        </div>
                    </div>

                    <div class="fixed-instruction">
                        <p>4 vezes ao dia, por 7 dias.</p>
                    </div>
                </div>

                <footer class="modal-footer">
                    <button class="btn-secondary" id="btn-cancel-dosage">Cancelar</button>
                    <button class="btn-primary" id="btn-confirm-dosage">Confirmar Sele√ß√£o</button>
                </footer>
            </section>
        </div>
    </div>

    <!-- Modal de Receitu√°rio Final -->
    <div class="modal-overlay" id="prescription-modal">
        <div class="modal-content prescription-modal-content">
            <section class="prescription-card printable-area" id="final-prescription-card">
                <header class="prescription-header">
                    <img src="Logos-produtos-EE/Essential-Energy-Logo.jpg" alt="Essential Energy" class="header-logo">
                    <div class="header-info">
                        <h2>RECEITU√ÅRIO DIGITAL</h2>
                        <p class="date-display" id="display-date"></p>
                    </div>
                </header>

                <div class="patient-banner">
                    <div class="patient-name-block">
                        Paciente: <strong id="display-patient-name"></strong>
                    </div>
                    <div class="patient-phone-block" id="display-patient-phone-row" style="opacity: 0.8;">
                    </div>
                    <p id="display-patient-phone" style="display:none;"></p>
                </div>

                <div class="prescribed-items" id="prescription-items-list">
                    <!-- Itens inseridos via JS -->
                </div>

                <div class="general-instructions">
                    <p>&nbsp;</p>
                    <p class="manual-note-line"></p>
                </div>

                <div class="signature-area">
                    <img src="Logos-produtos-EE/Lucy-sign.jpg" alt="Assinatura" class="signature-image">
                    <div class="sig-line"></div>
                    <p><strong>Dra. Lucy Harasawa</strong></p>
                    <p>Consultora de Sa√∫de</p>
                </div>
            </section>

            <footer class="prescription-actions">
                <button class="btn-action print" id="btn-print">
                    <span>üñ®Ô∏è Imprimir / PDF</span>
                </button>
                <button class="btn-action whatsapp" id="btn-whatsapp">
                    <span>üì± WhatsApp</span>
                </button>
                <button class="btn-secondary" id="btn-close-prescription">Voltar</button>
            </footer>
        </div>
    </div>

    <!-- Modal de Dados do Paciente -->
    <div class="modal-overlay" id="patient-modal">
        <div class="modal-content">
            <section class="prescription-card">
                <header class="card-header-dosage">
                    <h2 class="product-name-dosage">Dados do Paciente</h2>
                </header>
                <div class="card-content-dosage">
                    <div class="input-group">
                        <label class="group-label">Nome Completo</label>
                        <input type="text" id="input-patient-name" class="custom-text-input"
                            placeholder="Ex: Jo√£o Silva">
                    </div>
                    <div class="input-group">
                        <label class="group-label">Telefone / WhatsApp</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="input-patient-ddi" class="custom-text-input" placeholder="DDI"
                                value="55" style="width: 60px; text-align: center;">
                            <input type="text" id="input-patient-phone" class="custom-text-input"
                                placeholder="(00) 00000-0000" style="flex-grow: 1;">
                        </div>
                    </div>
                    <div class="input-group">
                        <label class="group-label">Data do Receitu√°rio</label>
                        <input type="date" id="input-prescription-date" class="custom-text-input">
                    </div>
                </div>
                <footer class="modal-footer">
                    <button class="btn-secondary" id="btn-cancel-patient">Cancelar</button>
                    <button class="btn-primary" id="btn-save-patient">Salvar Dados</button>
                </footer>
            </section>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>